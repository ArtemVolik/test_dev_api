# Тестовое задание Dev Api

[Deploy Heroku](https://flask-payment.herokuapp.com/) 

### Локальная установка: 
- Скачать все файлы
- Забрать зависимости  
  ```pip install requirements.txt```
  
- Создать `.env` файл с секретным ключиком.

Тестовый секретный ключ:
```SECRET_KEY='SecretKey01'```

Инициализация базы:   
```flask run```  
```flask db init```  
```flask db migrate -m "Initial migration"```  
```flask db upgrade```  

### Установка Heroku
Создать новое приложение в аккаунте HEROKU. Первый раз проще через web делать, чем через
`CLI`. 
- create new app
- на вкладке Resources в поле поиска найти Postgress, "Provision" себе бесплатную версию.
- обязательно не забыть про сервер. (в корне проекта `Procfile` в нем строчка  
  `web: gunicorn main:app;`  
(где web - тип процесса, : запуск нашего приложения gunicorn-ом)
- в виртуальной консоли выполнить:   
  `ptython db_create.py`  
для того чтобы создать таблички в новой базе.

#### Что это такое:
Просто тестовое задание Flask + API.

Для отправки платежа пользователи заполняют 3 поля.
- сумма  
- валюта  
- описание  
  
Для отправки платежа мы формируем ключ из словаря, в который, в том числе входят значения переданные из формы.
Но не только. Кроме того ключи словарей для разных валют - разные.( Почему не сделать одинаковые?!) 

Работает все "тупо, как в танке":
- Платеж USD
формируем параметры для запроса, подпись и делаем POST
отправляется запрос, из ответа получаем URL по URL делаем редирект.

- Платеж EUR - формируем данные для заполнения скрытой формы и сабмит:
https://github.com/ArtemVolik/test_dev_api/blob/main/app/templates/hidden_form.html

- Платеж RUB
формируем параметры для запроса, подпись, POST, из ответа получаем урл, 
метод и данные для генерации и отправки скрытой формы.
(По тестовым данным я не смог получить положительный ответ по этому запросу).  
Все платежи должны логироваться в файл или в базу, я выбрал базу.





